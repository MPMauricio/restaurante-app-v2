<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Restaurante Sabores - App Híbrida</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .menu-card {
            border: 1px solid #ccc;
            padding: 16px;
            margin: 8px;
            border-radius: 8px;
            background: white;
        }

        .select-menu {
            width: 100%;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
    </style>
</head>

<body style="background-color: #f3f4f6; font-family: Arial, sans-serif;">
    <div style="max-width: 1200px; margin: 0 auto; padding: 16px;">
        <header
            style="background-color: #2563eb; color: white; padding: 16px; border-radius: 8px; margin-bottom: 24px;">
            <h1 style="font-size: 1.875rem; font-weight: bold; text-align: center;">Restaurante Sabores</h1>
            <p style="text-align: center;">Explora nuestro menú y haz tu pedido</p>
        </header>
        <section id="menu" style="display: grid; gap: 24px;"></section>
        <section id="order-form"
            style="margin-top: 32px; background: white; padding: 24px; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
            <h2 style="font-size: 1.5rem; font-weight: 600; margin-bottom: 16px;">Realiza tu Pedido</h2>
            <form id="pedido-form">
                <div style="margin-bottom: 16px;"><label for="menu-select"
                        style="display: block; color: #4b5563;">Selecciona un Menú</label><select id="menu-select"
                        class="select-menu"></select></div>
                <div style="margin-bottom: 16px;"><label for="cantidad"
                        style="display: block; color: #4b5563;">Cantidad</label><input type="number" id="cantidad"
                        min="1" value="1"
                        style="width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px;"></div>
                <div style="margin-bottom: 16px;"><label for="nombre"
                        style="display: block; color: #4b5563;">Nombre</label><input type="text" id="nombre"
                        placeholder="Tu nombre"
                        style="width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px;"></div>
                <button type="submit"
                    style="background-color: #2563eb; color: white; padding: 8px 16px; border-radius: 4px; border: none;">Enviar
                    Pedido</button>
            </form>
            <p id="mensaje" style="margin-top: 16px; color: #16a34a; display: none;">¡Pedido enviado!</p>
            <button id="sync-google"
                style="margin-top: 16px; background-color: #16a34a; color: white; padding: 8px 16px; border-radius: 4px; border: none;">Sincronizar
                con Google Drive</button>
            <p id="status-sync" style="margin-top: 8px; color: #4b5563;"></p>
        </section>
        <section id="historial"
            style="margin-top: 32px; background: white; padding: 24px; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
            <h2 style="font-size: 1.5rem; font-weight: 600; margin-bottom: 16px;">Historial de Pedidos (Local)</h2>
            <ul id="lista-pedidos" style="list-style-type: disc; padding-left: 20px;"></ul>
        </section>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const menus = [
                { id: 1, nombre: "Pizza Margherita", precio: 10.99, descripcion: "Pizza clásica con tomate, mozzarella y albahaca." },
                { id: 2, nombre: "Hamburguesa Clásica", precio: 8.50, descripcion: "Carne, lechuga, tomate y salsa especial." },
                { id: 3, nombre: "Ensalada César", precio: 6.75, descripcion: "Lechuga, crutones, pollo y aderezo César." },
                { id: 4, nombre: "Pasta Carbonara", precio: 9.25, descripcion: "Espagueti con salsa de huevo, queso y panceta." },
                { id: 5, nombre: "Tacos al Pastor", precio: 7.99, descripcion: "Tacos de cerdo con piña y cilantro." }
            ];
            const STORAGE_KEY = 'historialPedidos';
            async function loadHistorial() { const saved = localStorage.getItem(STORAGE_KEY); return saved ? JSON.parse(saved) : []; }
            async function saveHistorial(pedidos) { localStorage.setItem(STORAGE_KEY, JSON.stringify(pedidos)); }
            const menuContainer = document.getElementById('menu');
            const menuSelect = document.getElementById('menu-select');
            menus.forEach(menu => {
                const card = document.createElement('div');
                card.className = 'menu-card bg-white p-4 rounded-lg shadow-lg';
                card.innerHTML = `<h3 class="text-xl font-semibold">${menu.nombre}</h3><p class="text-gray-600">${menu.descripcion}</p><p class="text-blue-600 font-bold">$${menu.precio.toFixed(2)}</p>`;
                menuContainer.appendChild(card);
                const option = document.createElement('option');
                option.value = menu.id;
                option.textContent = `${menu.nombre} - $${menu.precio.toFixed(2)}`;
                menuSelect.appendChild(option);
            });
            let historial = [];
            loadHistorial().then(data => { historial = data; renderHistorial(); });
            const listaPedidos = document.getElementById('lista-pedidos');
            async function renderHistorial() { listaPedidos.innerHTML = ''; historial.forEach(pedido => { const li = document.createElement('li'); li.textContent = `${pedido.nombre} pidió ${pedido.cantidad} x ${pedido.menu} (Total: $${pedido.total}) - ${pedido.fecha}`; listaPedidos.appendChild(li); }); }
            const pedidoForm = document.getElementById('pedido-form');
            const mensaje = document.getElementById('mensaje');
            pedidoForm.addEventListener('submit', async (e) => { e.preventDefault(); const menuId = parseInt(menuSelect.value); const cantidad = parseInt(document.getElementById('cantidad').value); const nombre = document.getElementById('nombre').value; if (!nombre) return alert('Ingresa tu nombre.'); if (!menuId) return alert('Selecciona un menú.'); const menu = menus.find(m => m.id === menuId); const pedido = { id: Date.now(), nombre, menu: menu.nombre, cantidad, total: (menu.precio * cantidad).toFixed(2), fecha: new Date().toLocaleString() }; try { await fakeApiRequest(pedido); mensaje.classList.remove('hidden'); setTimeout(() => mensaje.classList.add('hidden'), 3000); historial.push(pedido); await saveHistorial(historial); await renderHistorial(); pedidoForm.reset(); } catch (error) { alert('Error al enviar: ' + error.message); } });
            async function fakeApiRequest(pedido) { return new Promise(resolve => setTimeout(() => resolve(pedido), 1000)); }
            const syncButton = document.getElementById('sync-google');
            const statusSync = document.getElementById('status-sync');
            syncButton.addEventListener('click', async () => { if (historial.length === 0) return alert('No hay pedidos.'); if (!navigator.onLine) return alert('Sin conexión.'); statusSync.textContent = 'Sincronizando...'; try { await syncToGoogleDrive(historial); statusSync.textContent = '¡Sincronizado con Google Drive!'; setTimeout(() => statusSync.textContent = '', 3000); } catch (error) { statusSync.textContent = 'Error: ' + error.message; } });
            async function syncToGoogleDrive(datos) { return new Promise((resolve, reject) => { setTimeout(() => { console.log('Subiendo a Google Drive:', JSON.stringify(datos)); resolve(); }, 1500); }); }
        });
    </script>
</body>

</html>